# GCC



`GCC` 也即 `GNU Compiler Collection` 的简称，是用于编译与C语言血缘关系较为紧密的几种语言的编译器合集，比如 `C++`，`Objective-C`。

目前这里不会讨论过于深奥的GCC相关内容，主要会讲解部分常用知识。



## 编译源代码



编译一份C语言源代码可能是每一个学习C语言都会需要学习的技能吧，这里我们来简单的讨论一下。

这里有一份源代码叫 `main.c`：

```c
#include <stdio.h>

int main() {
    printf("%d", (1, 2));
}
```

编译指令如下：

```shell
gcc main.c -o main
```

得到的程序叫 `main`，在 `Windows` 环境下会生成一个带有 `.exe` 后缀的文件，表示该文件是可执行的（executable）。

我们执行可以得到输出如下：

```shell
2
```

这就是最简单的C语言源代码文件编译。



## 获取对应程序的汇编代码（AT&T格式）



那么接下来，我们来考虑如下一段命令。

```
gcc main.c -S
```

这在该目录下生成了一个文件为 `main.s`。这个文件只有当需要研究汇编的时候会需要，不过，C语言和汇编蛮近的，以至于有人称呼C语言为高级汇编语言，所以学习C语言的时候学习一定的汇编知识是有益的。



## 将源文件编译成目标文件



命令如下：

```shell
gcc main.c -c
```

这在该目录下生成了一个文件叫 `main.o`，

从目标文件到达可执行文件的命令如下：

```shell
gcc main.o -o main
```

即仅仅是将之前的源文件换成了编译过的目标文件。



## 获取预处理之后的源文件



命令如下：

```shell
gcc main.c -E > txts
```

该指令将输出内容重定向到了名字叫 `txts` 的文件中。



## 按照某个标准编译源代码



命令如下：

```shell
gcc main.c -std=c11 -o main
```

这些标准都有一定的对应，比如 `-std=c99`，`-ansi` 等，这可以满足一些特殊的需求。



## 开启优化



命令如下：

```shell
gcc main.c -O -o main
```

其中的大O是开启优化的标志，基本的及各级别有 `O0`，`O1`，`Og`，`O2`，`O3`。这些优化等级都会开放一定的优化标志。







